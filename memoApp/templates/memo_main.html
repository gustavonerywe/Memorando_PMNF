{% extends 'template.html' %}
{% block subtitulo %}

{% endblock %}
{% block content %}

<html class="page_main" lang="pt-br">
<button class="btn btn-danger" id='btnTrueSair'><a href="{% url 'encerraSessao' %}" id="btnSair">Sair</a></button>

<body>
    <link rel="stylesheet" href="/static/css/style.css">

    <header>
        <form id="form-main" method="post" enctype="multipart/form-data" action="{% url 'upload' %}">
            {% csrf_token %}
            <div id="header">
                <img id="img" src="https://pedroschuenck.github.io/prefeituraImg.png" alt="Logo da prefeitura">
            </div>
            <hr>
            <div id="content">
                <table class="table" class="custom-table">
                    <tr>
                        <th id="tituloTable" colspan="2" class="table-info">MEMORANDO</th>
                    </tr>
                    <tr class="table-secondary">
                        <th>Data:</th>
                        <td><input type="date" name="data" value="{% now 'Y-m-d' %}"></td>
                    </tr>
                    <tr class="table-secondary">
                        <th>Nº do memorando</th>
                        <td><span id="memo_numero">{{memo_numero_atualizado}}</span></td>
                    </tr>
                    <tr class="table-secondary">
                        <th>De:</th>
                        <td id="td-table-memo">{{ user.groups.first.name }}
                            <hr> {{ user.get_full_name }}
                        </td>
                    </tr>
                    <tr class="table-secondary">
                        <th><span style="color: red;">* </span>Para:</th>
                        <td>
                            <div id="container_and_button">
                                <div id="select-table">
                                    <div class="select-wrapper" id="select-container">
                                        <select name="destinatario" id="select-secretaria" class="select2 selects">
                                            <option id="option-disabled" disabled selected>-- Selecione um grupo --
                                            </option>
                                            <option id='option-all'>Todos</option>
                                            {% for grupo in grupos %}
                                            <option value="{{grupo.name}}">{{ grupo.name }}</option>
                                            {% endfor %}
                                        </select>
                                        {% comment %} <div id="selectFather"></div> {% endcomment %}
                                    </div>
                                </div>
                                <button type="button" style="font-size: 0.7em;" id="addSelect">
                                    <i class="bi bi-plus-lg"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr class="table-secondary">
                        <th>Cópia para:</th>
                        <td>
                            <div id="container_and_button-copia">
                                <div id="select-table-copia">
                                    <div class="select-wrapper-copia" id="select-container-copia">
                                        <select name="destinatarios_copia" id="select-secretaria-copia-para"
                                            class="select2 selects">
                                            <option id="option-disabled" disabled selected>-- Selecione um grupo --
                                            </option>
                                            <option id='option-all-copia'>Todos</option>
                                            {% for grupo in grupos %}
                                            <option value="{{grupo.name}}">{{ grupo.name }}</option>
                                            {% endfor %}
                                        </select>
                                        {% comment %} <div id="selectFather"></div> {% endcomment %}
                                    </div>
                                </div>
                                <button type="button" style="font-size: 0.7em;" id="addSelectCopia">
                                    <i class="bi bi-plus-lg"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                    <tr class="table-secondary">
                        <th> <span style="color: red;">* </span>Assunto:</th>
                        <td><input type="text" id="id_name" name="assunto_memorando" required></td>
                    </tr>
                </table>

                <section id="corpoMemorando">
                    <textarea id="corpo" name="corpo"></textarea>
                </section>
            </div>
            <div id="footer">
                <p>
                <fieldset id="box-field">
                    <table>
                        <tr>
                            <th id="tituloTable2">RECEBIDO</td>
                        </tr>
                        <tr>
                            <td id="em"> Em: ______ /______ /______</td>
                        </tr>
                        <tr>
                            <td id=ass> Ass: _____________________</td>
                        </tr>
                    </table>
                </fieldset>
            </div>
            </footer>
</body>
<hr>

<h1 id="title-footer">ARQUIVOS EM ANEXO</h1>


<!-- templates/upload.html -->
<br>
<div id="drop-area" class="dropzone" >
    <div id="file-margin">
        <div id="div-icon">
        <i class="bi bi-cloud-arrow-up" id="icon-files"></i>
        </div>
        <p id="spanMessage"></p>
        <div id="input-container">
            <div id="container-file">
                <div class="input-row" id="div-anexo-orig">
                    <button type="button" id="botaoModal" class="cancel-button"
                        data-index="original"><i class="bi bi-dash"></i></button>
                    <div class="mb-3">
                        <input class="form-control form-control-sm" id="id_file" type="file">
                    </div>
                    <button type="button" style="font-size: 1.0em;" class="addInput" id="addInput">
                        <i class="bi bi-plus"></i>
                    </button>
                </div>
            </div>
            <p id="uploadFile">Escolha ou arraste os arquivos aqui!</p>
        </div>
    </div>
</div>
<div id="italic-message">
    <em style="font-size: 0.7em;">Tamanho máximo: 100mb</em>
</div>
</div>
<br><br>
<div id="name-file">
    <table>
        <tr>
            <td>
                <section id="main-file">
                        <div id="meuModal">
                            <div class="modal-content">
                                <span class="fechar">&times;</span>
                                <!-- <img src="https://pedroschuenck.github.io/prefeituraImg.png" style="position: fixed;" width="200px" height="100px" alt="brasao-pmnf"> -->
                                <p style="font-size: 17px;">Deseja cancelar o envio do arquivo?</p>
                                <div class="button-container">
                                    <button type="button" id="buttonNoModal" class="btn btn-danger btn-sm">Não</button>
                                    <button type="button" id="buttonYesModal"
                                        class="btn btn-success btn-sm">Sim</button>
                                </div>
                            </div>
                        </div>
                </section>
            </td>
        </tr>
    </table>
</div>
<div>
</div>
<div id="button-file">
    <button id="botao" class="btn btn btn-lg" type="submit">Enviar</button>
    <div id="meuModalMemorando">
        <div class="modal-content-memorando">
            <span class="fecharMemorando">&times;</span>
            <div class="modal-body">
                <!-- <img src="https://pedroschuenck.github.io/prefeituraImg.png" style="position: fixed;" width="200px" height="100px" alt="brasao-pmnf"> -->
                <div id="container-modal-memo">
                    <p style="text-align: center; font-size: 20px; margin-bottom: 0;">Deseja enviar o memorando?</p>
                    <span id="span-alert"
                        style="font-size: 0.8em; margin-bottom: 10px; margin-top: 10px; text-align: center; color: rgb(168, 67, 67);">Lembre-se:
                        quando o memorando for enviado, ele será salvo no banco de dados.</span>
                    <div class="button-container">
                        <button type="button" class="btn btn-danger btn-sm" id="buttonNoModalMemorando">Não</button>
                        <button type="button" class="btn btn-success btn-sm" id="buttonYesModalMemorando">Sim</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div>
    {% if form.file.errors %}
    <ul id="error-message">
        {% for error in form.file.errors %}
        {{ error }}
        {% endfor %}
    </ul>
    {% endif %}
</div>
<div id="verify-message">
    <em style="font-size: 0.6em;">Confira todo o memorando antes de enviar.</em>
</div>
</form>
<div id="meuModalAssunto">
    <div class="modal-content">
        <span class="fechar" id="botaoFechar">&times;</span>
        <!-- <img src="https://pedroschuenck.github.io/prefeituraImg.png" style="position: fixed;" width="200px" height="100px" alt="brasao-pmnf"> -->
        <div id="container-modal-atencao"></div>
        <span
            style="font-size: 1.6em; margin-bottom: 0; margin-top: 0; text-align: center; color: rgb(168, 67, 67);">Atenção!</span>
        <p style="font-size: 1.1em; text-align: center; margin-top: 5px;">O campo<span id="texto-colocar"></span><span
                id="texto-colocar-para"></span> é obrigatório!</p>
        <button type="button" id="ok-modal" class="btn btn-dark btn-sm">Ok</button>
    </div>
</div>
<script src="/static/js/memoMain.js"></script>
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js"></script>
<script>
    tinymce.init({
        selector: '#corpo',
        height: 500,
        plugins: 'advlist autolink lists link image charmap print preview hr anchor pagebreak',
        toolbar_mode: 'floating',
        toolbar: 'undo redo | formatselect | bold italic backcolor | \
                  alignleft aligncenter alignright alignjustify | \
                  bullist numlist outdent indent | removeformat | help',
        content_style: 'body { font-family: Arial, sans-serif; font-size: 14px; }',
        content_css: 'custom-styles.css',
    });

    /*function filterOptions() {
        var input, filter, select, options, i;
        input = document.getElementById('searchInput');
        filter = input.value.toUpperCase();
        select = document.getElementById('select-secretaria');
        options = select.getElementsByTagName('option');
 
        for (i = 0; i < options.length; i++) {
            if (options[i].textContent.toUpperCase().indexOf(filter) > -1) {
                options[i].style.display = '';
            } else {
                options[i].style.display = 'none';
            }
        }
    }*/
</script>
<!-- códigos para o search dentro do select  -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script>
    $(document).ready(function () {
        // $('.select2').select2();
        $('#select-secretaria').select2();
        $('#select-secretaria-copia-para').select2();
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.js"></script>

</html>
{% endblock %}